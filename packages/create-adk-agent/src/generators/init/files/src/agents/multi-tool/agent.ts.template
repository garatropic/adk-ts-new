import { FunctionTool, LlmAgent } from '@google/adk';<% if (modelProvider === 'openai' || modelProvider === 'anthropic') { %>
import { LiteLlm } from '@google/adk';<% } %>
import { z } from 'zod';

/* Mock tool implementations */
const getCurrentTime = new FunctionTool({
  name: 'get_current_time',
  description: 'Returns the current time in a specified city.',
  parameters: z.object({
    city: z.string().describe('The name of the city for which to retrieve the current time.'),
  }),
  execute: ({ city }) => {
    return { status: 'success', report: `The current time in ${city} is 10:30 AM` };
  },
});

const getWeather = new FunctionTool({
  name: 'get_weather',
  description: 'Returns the current weather for a specified city.',
  parameters: z.object({
    city: z.string().describe('The name of the city for which to retrieve the weather.'),
  }),
  execute: ({ city }) => {
    return { status: 'success', report: `The weather in ${city} is sunny and 72Â°F` };
  },
});

export const rootAgent = new LlmAgent({
  name: 'multi_tool_agent',
  <% if (modelProvider === 'gemini') { %>model: '<%= model %>',<% } else if (modelProvider === 'openai' || modelProvider === 'anthropic') { %>model: new LiteLlm({ model: '<%= model %>' }),<% } else { %>model: '<%= model %>',<% } %>
  description: 'Provides current time and weather information for cities.',
  instruction: `You are a helpful assistant that provides time and weather information.
                Use the 'getCurrentTime' tool to get the time in a city.
                Use the 'getWeather' tool to get weather information for a city.`,
  tools: [getCurrentTime, getWeather],
});
